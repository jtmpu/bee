# bee

suite of tools for automatically running and saving program output. TODO.

## bee

A utility program for saving stdout, stderr and files generated by programs. 

As simple as

```
user@hdev:~$ bee nc -vlp 1234
listening on [any] 1234 ...
connect to [xxx.xxx.xxx.xxx] from xxxx [xxx.xx.xx.xxx] 35378
user@server:~$ whoami
whoami
user
user@server:~$ ^C[!] Aborting, saving data.
```

which will store all arguments, all stdout and stderr generated, timestamps and exit codes in the folder "~/.beehive"

All files generated in the local directory can be saved using:

```
user@hdev:~$ bee -g nmap -Pn -n -sV -p 1-10000 -vvv -oA data 127.0.0.1
Starting Nmap 7.70 ( https://nmap.org ) at 2020-04-20 15:46 CEST
NSE: Loaded 43 scripts for scanning.
Initiating Connect Scan at 15:46
Scanning scanme.nmap.org (45.33.32.156) [10000 ports]
Discovered open port 22/tcp on 127.0.0.1
Discovered open port 80/tcp on 127.0.0.1
```

This will create a new temporary working directory in tmp, and copy all files from this folder upon program exit.

## bee-hive

Tool for easier access to output generated, in progress.

```
user@hdev:~$ bee-hive list -a
0. 2020-04-20 13:46:27 -> 2020-04-20 13:46:38	nmap -Pn -n -sV -p 1-10000 -vvv -oA data scanme.nmap.org
1. 2020-04-20 13:48:32 -> 2020-04-20 13:48:42	nc -vlp 1234
```

```
user@hdev:~$ bee-hive list -a -d
0. nmap
  - Command     : nmap -Pn -n -sV -p 1-10000 -vvv -oA data 127.0.0.1
  - Start       : 2020-04-20 13:46:27
  - End         : 2020-04-20 13:46:38
  - GatherOutput: True
  - HasFinished : True
  - Aborted     : True
  - ExitCode    : Just 1
  - Files       : 
    - /home/user/.beehive/nmap/1587390387/data.nmap
    - /home/user/.beehive/nmap/1587390387/stdout.hny
    - /home/user/.beehive/nmap/1587390387/data.xml
    - /home/user/.beehive/nmap/1587390387/stderr.hny
    - /home/user/.beehive/nmap/1587390387/data.gnmap
    - /home/user/.beehive/nmap/1587390387/info.hny
    - /home/user/.beehive/nmap/1587390387/status.hny
1. nc
  - Command     : nc -vlp 1234
  - Start       : 2020-04-20 13:48:32
  - End         : 2020-04-20 13:48:42
  - GatherOutput: False
  - HasFinished : True
  - Aborted     : True
  - ExitCode    : Just 1
  - Files       : 
    - /home/user/.beehive/nc/1587390512/stdout.hny
    - /home/user/.beehive/nc/1587390512/stderr.hny
    - /home/user/.beehive/nc/1587390512/info.hny
    - /home/user/.beehive/nc/1587390512/status.hny
```

```
user@hdev:~$ bee-hive cat -i 1 --output
user@server:~$ whoami
user
user@server:~$ 

user@hdev:~$ bee-hive cat -i 1 --details | jq '.'
{
  "processInfo": {
    "arguments": [
      "-vlp",
      "1234"
    ],
    "program": "nc"
  },
  "gatherOuput": false,
  "processStorage": {
    "extension": "hny",
    "timestamp": 1587390512,
    "directory": "/home/user/.beehive/nc/1587390512"
  }
}

user@hdev:~$ bee-hive cat -i 1 --status | jq '.'
{
  "hasFinished": true,
  "endTimestamp": 1587390522,
  "exitCode": 1,
  "aborted": true,
  "startTimestamp": 1587390512
}
```
